---
description: Code style, TypeScript, and framework-specific patterns
globs:
  - "**/*.{ts,tsx,js,jsx}"
---

# Coding Patterns

> **EXAMPLE**: Customize for your language/framework.
> Place in: `/.cursor/rules/coding-patterns.mdc`

---

## TypeScript Configuration

### Key Settings

```json
{
  "compilerOptions": {
    "strict": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitReturns": true
  }
}
```

### Rules

- Strict mode ON
- Explicit return types for public functions
- No `any` - use `unknown` when type is uncertain
- Prefer `interface` over `type` for object shapes

---

## Naming Conventions

### Files and Directories

| Type | Convention | Example |
|------|------------|---------|
| Components | PascalCase | `UserProfile.tsx` |
| Hooks | camelCase with `use` | `useAuth.ts` |
| Utils | camelCase | `formatDate.ts` |
| Types | PascalCase | `User.types.ts` |
| Constants | SCREAMING_SNAKE | `API_ENDPOINTS.ts` |
| Directories | kebab-case | `user-profile/` |

### Code

```typescript
// Variables - camelCase
const userName = 'John'

// Constants - SCREAMING_SNAKE_CASE
const API_BASE_URL = 'https://api.example.com'

// Functions - camelCase, verb prefix
function getUserById(id: string) {}
function handleSubmit() {}

// Types/Interfaces - PascalCase
interface UserProfile {}
type ButtonVariant = 'primary' | 'secondary'

// Components - PascalCase
function UserCard() {}

// Hooks - camelCase with use prefix
function useUserData() {}
```

---

## Component Patterns

### Functional Components Only

```typescript
// CORRECT - Functional component
interface ButtonProps {
  variant?: 'primary' | 'secondary'
  children: React.ReactNode
  onClick?: () => void
}

export function Button({ 
  variant = 'primary', 
  children, 
  onClick 
}: ButtonProps) {
  return (
    <button 
      className={`btn btn-${variant}`}
      onClick={onClick}
    >
      {children}
    </button>
  )
}

// WRONG - Class component (avoid)
class Button extends React.Component {}
```

### Component Structure

```typescript
export function FeatureComponent({ prop1, prop2 }: Props) {
  // 1. Hooks (always at the top)
  const [state, setState] = useState()
  const { data } = useQuery()
  
  // 2. Derived/computed values
  const computedValue = useMemo(() => {}, [])
  
  // 3. Event handlers
  const handleClick = useCallback(() => {}, [])
  
  // 4. Effects (if needed)
  useEffect(() => {}, [])
  
  // 5. Early returns
  if (!data) return <Loading />
  
  // 6. Render
  return <div>{/* JSX */}</div>
}
```

---

## Type Patterns

### Interface vs Type

```typescript
// Interface - for object shapes (preferred)
interface User {
  id: string
  name: string
  email: string
}

// Type - for unions, primitives, computed types
type Status = 'pending' | 'approved' | 'rejected'
type UserWithPosts = User & { posts: Post[] }
```

### Props Types

```typescript
// Props interface naming
interface ButtonProps {
  variant?: 'primary' | 'secondary'
  size?: 'sm' | 'md' | 'lg'
  children: React.ReactNode
  onClick?: () => void
}

// Extending native elements
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label: string
  error?: string
}
```

---

## Error Handling

```typescript
async function fetchData() {
  try {
    const response = await api.get('/data')
    return response.data
  } catch (error) {
    if (error instanceof ApiError) {
      throw new Error(`API Error: ${error.message}`)
    }
    throw error
  }
}
```

---

## Import/Export Patterns

### Named Exports (Preferred)

```typescript
// CORRECT - Named exports
export function useAuth() {}
export const AuthContext = createContext()
export type { AuthState }

// AVOID - Default exports (except pages)
export default function useAuth() {}
```

### Re-exports

```typescript
// features/auth/index.ts
export { useAuth } from './hooks/useAuth'
export { AuthProvider } from './components/AuthProvider'
export type { User, AuthState } from './types'
```

---

## Anti-Patterns to Avoid

```typescript
// WRONG - Mutating state directly
state.items.push(newItem)

// CORRECT - Create new reference
setState(prev => [...prev.items, newItem])

// WRONG - Conditional hooks
if (condition) {
  useEffect(() => {})
}

// CORRECT - Condition inside hook
useEffect(() => {
  if (condition) {
    // do something
  }
}, [condition])

// WRONG - Inline objects in deps
useEffect(() => {}, [{ id }])

// CORRECT - Primitive deps
useEffect(() => {}, [id])
```
